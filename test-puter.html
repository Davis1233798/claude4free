<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Puter AI API æ¸¬è©¦</title>
    <!-- å¼•å…¥ Puter.js -->
    <script src="https://js.puter.com/v2/"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-section {
            background: white;
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 4px;
            white-space: pre-wrap;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
        }
        input, select {
            padding: 8px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <h1>ğŸš€ Puter AI API åŠŸèƒ½æ¸¬è©¦</h1>
    
    <div class="test-section">
        <h2>ğŸ“Š Puter é€£æ¥ç‹€æ…‹</h2>
        <button onclick="checkPuterConnection()">æª¢æŸ¥é€£æ¥</button>
        <div id="connection-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ’¬ èŠå¤©åŠŸèƒ½æ¸¬è©¦</h2>
        <select id="chat-model">
            <option value="gpt-4o-mini">GPT-4o Mini</option>
            <option value="gpt-4o">GPT-4o</option>
            <option value="claude-3-5-sonnet">Claude 3.5 Sonnet</option>
            <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
        </select>
        <input type="text" id="chat-input" placeholder="è¼¸å…¥æ¸¬è©¦è¨Šæ¯..." value="ä½ å¥½ï¼Œè«‹ç°¡å–®ä»‹ç´¹è‡ªå·±">
        <button onclick="testChat()">æ¸¬è©¦èŠå¤©</button>
        <div id="chat-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ”Š èªéŸ³ç”Ÿæˆæ¸¬è©¦</h2>
        <input type="text" id="tts-input" placeholder="è¼¸å…¥è¦è½‰æ›çš„æ–‡å­—..." value="é€™æ˜¯ä¸€å€‹èªéŸ³æ¸¬è©¦">
        <select id="tts-voice">
            <option value="zh-TW-HsiaoChenNeural">ä¸­æ–‡ï¼ˆç¹é«”ï¼‰</option>
            <option value="zh-CN-XiaoxiaoNeural">ä¸­æ–‡ï¼ˆç°¡é«”ï¼‰</option>
            <option value="en-US-JennyNeural">English</option>
        </select>
        <button onclick="testTTS()">æ¸¬è©¦èªéŸ³ç”Ÿæˆ</button>
        <div id="tts-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ¨ åœ–ç‰‡ç”Ÿæˆæ¸¬è©¦</h2>
        <input type="text" id="img-input" placeholder="æè¿°è¦ç”Ÿæˆçš„åœ–ç‰‡..." value="ä¸€éš»å¯æ„›çš„å°è²“åœ¨èŠ±åœ’è£¡ç©è€">
        <select id="img-size">
            <option value="512x512">512x512</option>
            <option value="1024x1024">1024x1024</option>
        </select>
        <button onclick="testImageGeneration()">æ¸¬è©¦åœ–ç‰‡ç”Ÿæˆ</button>
        <div id="img-result" class="result"></div>
    </div>

    <div class="test-section">
        <h2>ğŸ–¼ï¸ åœ–ç‰‡è­˜åˆ¥æ¸¬è©¦</h2>
        <input type="file" id="img-upload" accept="image/*">
        <input type="text" id="img-question" placeholder="å°åœ–ç‰‡çš„å•é¡Œ..." value="é€™å¼µåœ–ç‰‡ä¸­æœ‰ä»€éº¼ï¼Ÿ">
        <button onclick="testImageRecognition()">æ¸¬è©¦åœ–ç‰‡è­˜åˆ¥</button>
        <div id="img-rec-result" class="result"></div>
    </div>

    <script>
        // æª¢æŸ¥Puteré€£æ¥
        async function checkPuterConnection() {
            const resultDiv = document.getElementById('connection-result');
            resultDiv.textContent = 'æ­£åœ¨æª¢æŸ¥é€£æ¥...';
            resultDiv.className = 'result';
            
            try {
                if (typeof puter === 'undefined') {
                    throw new Error('Puter.js æœªè¼‰å…¥');
                }
                
                // æ¸¬è©¦åŸºæœ¬APIèª¿ç”¨
                const response = await puter.ai.chat("Hello", { model: 'gpt-4o-mini' });
                
                resultDiv.textContent = `âœ… Puter é€£æ¥æ­£å¸¸\nå›æ‡‰: ${JSON.stringify(response, null, 2)}`;
                resultDiv.className = 'result success';
            } catch (error) {
                resultDiv.textContent = `âŒ é€£æ¥å¤±æ•—: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }

        // æ¸¬è©¦èŠå¤©åŠŸèƒ½
        async function testChat() {
            const resultDiv = document.getElementById('chat-result');
            const model = document.getElementById('chat-model').value;
            const message = document.getElementById('chat-input').value;
            
            if (!message.trim()) {
                resultDiv.textContent = 'è«‹è¼¸å…¥æ¸¬è©¦è¨Šæ¯';
                resultDiv.className = 'result error';
                return;
            }
            
            resultDiv.textContent = 'æ­£åœ¨æ¸¬è©¦èŠå¤©åŠŸèƒ½...';
            resultDiv.className = 'result';
            
            try {
                const response = await puter.ai.chat(message, { model: model });
                
                let text = '';
                if (response && typeof response === 'object') {
                    if (response.message && response.message.content && Array.isArray(response.message.content)) {
                        text = response.message.content[0]?.text || '';
                    } else if (response.content) {
                        text = response.content;
                    } else if (response.text) {
                        text = response.text;
                    } else {
                        text = JSON.stringify(response);
                    }
                } else {
                    text = String(response);
                }
                
                resultDiv.textContent = `âœ… èŠå¤©æ¸¬è©¦æˆåŠŸ\næ¨¡å‹: ${model}\nå•é¡Œ: ${message}\nå›æ‡‰: ${text}`;
                resultDiv.className = 'result success';
            } catch (error) {
                resultDiv.textContent = `âŒ èŠå¤©æ¸¬è©¦å¤±æ•—: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }

        // æ¸¬è©¦èªéŸ³ç”Ÿæˆ
        async function testTTS() {
            const resultDiv = document.getElementById('tts-result');
            const text = document.getElementById('tts-input').value;
            const voice = document.getElementById('tts-voice').value;
            
            if (!text.trim()) {
                resultDiv.textContent = 'è«‹è¼¸å…¥è¦è½‰æ›çš„æ–‡å­—';
                resultDiv.className = 'result error';
                return;
            }
            
            resultDiv.textContent = 'æ­£åœ¨ç”ŸæˆèªéŸ³...';
            resultDiv.className = 'result';
            
            try {
                const response = await puter.ai.textToSpeech(text, { voice: voice });
                
                if (response && response.url) {
                    resultDiv.innerHTML = `âœ… èªéŸ³ç”ŸæˆæˆåŠŸ<br>
                        æ–‡å­—: ${text}<br>
                        èªéŸ³: ${voice}<br>
                        <audio controls><source src="${response.url}" type="audio/mpeg">éŸ³é »æ’­æ”¾ä¸æ”¯æ´</audio>`;
                    resultDiv.className = 'result success';
                } else {
                    throw new Error('æœªæ”¶åˆ°éŸ³é »URL');
                }
            } catch (error) {
                resultDiv.textContent = `âŒ èªéŸ³ç”Ÿæˆå¤±æ•—: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }

        // æ¸¬è©¦åœ–ç‰‡ç”Ÿæˆ
        async function testImageGeneration() {
            const resultDiv = document.getElementById('img-result');
            const prompt = document.getElementById('img-input').value;
            const size = document.getElementById('img-size').value;
            
            if (!prompt.trim()) {
                resultDiv.textContent = 'è«‹è¼¸å…¥åœ–ç‰‡æè¿°';
                resultDiv.className = 'result error';
                return;
            }
            
            resultDiv.textContent = 'æ­£åœ¨ç”Ÿæˆåœ–ç‰‡...';
            resultDiv.className = 'result';
            
            try {
                const response = await puter.ai.textToImage(prompt, { 
                    size: size,
                    quality: 'standard',
                    style: 'vivid'
                });
                
                if (response && response.url) {
                    resultDiv.innerHTML = `âœ… åœ–ç‰‡ç”ŸæˆæˆåŠŸ<br>
                        æè¿°: ${prompt}<br>
                        å°ºå¯¸: ${size}<br>
                        <img src="${response.url}" alt="ç”Ÿæˆçš„åœ–ç‰‡" style="max-width: 300px; border-radius: 8px; margin-top: 10px;">`;
                    resultDiv.className = 'result success';
                } else {
                    throw new Error('æœªæ”¶åˆ°åœ–ç‰‡URL');
                }
            } catch (error) {
                resultDiv.textContent = `âŒ åœ–ç‰‡ç”Ÿæˆå¤±æ•—: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }

        // æ¸¬è©¦åœ–ç‰‡è­˜åˆ¥
        async function testImageRecognition() {
            const resultDiv = document.getElementById('img-rec-result');
            const fileInput = document.getElementById('img-upload');
            const question = document.getElementById('img-question').value;
            
            if (!fileInput.files[0]) {
                resultDiv.textContent = 'è«‹é¸æ“‡åœ–ç‰‡æ–‡ä»¶';
                resultDiv.className = 'result error';
                return;
            }
            
            if (!question.trim()) {
                resultDiv.textContent = 'è«‹è¼¸å…¥å°åœ–ç‰‡çš„å•é¡Œ';
                resultDiv.className = 'result error';
                return;
            }
            
            resultDiv.textContent = 'æ­£åœ¨è­˜åˆ¥åœ–ç‰‡...';
            resultDiv.className = 'result';
            
            try {
                const file = fileInput.files[0];
                const response = await puter.ai.chat([
                    { type: 'text', text: question },
                    { type: 'image', image: file }
                ], {
                    model: 'gpt-4o'
                });
                
                let text = '';
                if (response && typeof response === 'object') {
                    if (response.message && response.message.content && Array.isArray(response.message.content)) {
                        text = response.message.content[0]?.text || '';
                    } else if (response.content) {
                        text = response.content;
                    } else if (response.text) {
                        text = response.text;
                    } else {
                        text = JSON.stringify(response);
                    }
                } else {
                    text = String(response);
                }
                
                resultDiv.textContent = `âœ… åœ–ç‰‡è­˜åˆ¥æˆåŠŸ\nå•é¡Œ: ${question}\nå›æ‡‰: ${text}`;
                resultDiv.className = 'result success';
            } catch (error) {
                resultDiv.textContent = `âŒ åœ–ç‰‡è­˜åˆ¥å¤±æ•—: ${error.message}`;
                resultDiv.className = 'result error';
            }
        }

        // é é¢è¼‰å…¥å¾Œè‡ªå‹•æª¢æŸ¥é€£æ¥
        window.addEventListener('load', function() {
            setTimeout(checkPuterConnection, 1000);
        });
    </script>
</body>
</html> 