---
description:
globs:
alwaysApply: false
---
# AMP Development Guidelines

## AMP Constraints and Requirements
This project uses **AMP (Accelerated Mobile Pages)** which has strict requirements that must be followed.

## Required AMP Components
The main file [index.html](mdc:index.html) includes these essential AMP components:
```html
<script async src="https://cdn.ampproject.org/v0.js"></script>
<script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script>
<script async custom-element="amp-selector" src="https://cdn.ampproject.org/v0/amp-selector-0.1.js"></script>
<script async custom-element="amp-bind" src="https://cdn.ampproject.org/v0/amp-bind-0.1.js"></script>
```

## AMP Development Rules

### ✅ DO:
- Use `amp-state` for reactive data management
- Use `amp-selector` for interactive form elements
- Use `amp-bind` for dynamic content updates
- Use `on="tap:AMP.setState()"` for click handlers
- Use `[attribute]="expression"` for dynamic attributes
- Use `action-xhr` for form submissions
- Keep all CSS in `<style amp-custom>` tags
- Use semantic HTML with ARIA attributes

### ❌ DON'T:
- Use custom JavaScript (except inline event handlers)
- Use `amp-auto-ads` (causes errors - removed in recent fixes)
- Use external stylesheets
- Use `<script>` tags except for AMP components
- Use synchronous XMLHttpRequest
- Use inline styles (except AMP-allowed)

## Common AMP Patterns in This Project

### State Management:
```html
<amp-state id="appState">
  <script type="application/json">
  {
    "theme": "light",
    "currentFunction": "chat",
    "loading": false
  }
  </script>
</amp-state>
```

### Interactive Elements:
```html
<amp-selector on="select:AMP.setState({appState: {selectedModel: event.targetOption}})">
  <option value="gpt-4o">GPT-4o</option>
</amp-selector>
```

### Form Handling:
```html
<form method="post" 
      action-xhr="https://api-endpoint.com/chat"
      on="submit:AMP.setState({appState: {loading: true}})">
```

## Debugging AMP
- Use [AMP Validator](https://validator.ampproject.org/) to check compliance
- Check browser console for AMP-specific errors
- Test with `#development=1` URL parameter for detailed debugging
